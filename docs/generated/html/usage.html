<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8" /><meta name="generator" content="Docutils 0.17.1: http://docutils.sourceforge.net/" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Usage &mdash; Entity Resolution Kit 1.3.0 documentation</title>
      <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
      <link rel="stylesheet" href="_static/css/theme.css" type="text/css" />
  <!--[if lt IE 9]>
    <script src="_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
        <script data-url_root="./" id="documentation_options" src="_static/documentation_options.js"></script>
        <script src="_static/jquery.js"></script>
        <script src="_static/underscore.js"></script>
        <script src="_static/doctools.js"></script>
    <script src="_static/js/theme.js"></script>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="entity_resolution" href="modules.html" />
    <link rel="prev" title="Installation" href="installation.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
            <a href="index.html" class="icon icon-home"> Entity Resolution Kit
          </a>
              <div class="version">
                1.3.0
              </div>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <p class="caption" role="heading"><span class="caption-text">Contents:</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="readme.html">Entity Resolution Kit</a></li>
<li class="toctree-l1"><a class="reference internal" href="installation.html">Installation</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">Usage</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#demo">Demo</a></li>
<li class="toctree-l2"><a class="reference internal" href="#neo4j">Neo4j</a></li>
<li class="toctree-l2"><a class="reference internal" href="#raw">Raw</a></li>
<li class="toctree-l2"><a class="reference internal" href="#json-entities">JSON Entities</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="modules.html">entity_resolution</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="index.html">Entity Resolution Kit</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="index.html" class="icon icon-home"></a> &raquo;</li>
      <li>Usage</li>
      <li class="wy-breadcrumbs-aside">
            <a href="_sources/usage.rst.txt" rel="nofollow"> View page source</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <section id="usage">
<h1>Usage<a class="headerlink" href="#usage" title="Permalink to this headline"></a></h1>
<p>Import the package <cite>entity_resolution</cite> in a Python session (or Jupyter notebook):</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">entity_resolution</span> <span class="kn">import</span> <span class="o">*</span>
</pre></div>
</div>
<p>There are plenty of methods in this package to deal with predictions but they have been combined in the <cite>solution</cite> module to simple and direct methods which can interact with raw/gzip directories, JSON entities directories and Neo4j.</p>
<p>Below we highlight the most relevant high-level methods. The idea is that for each type of data (raw, JSON, Neo4j) you can create synthetic graphs, make predictions and save predictions. There are also methods to interact with S3 and it should allow various integrations with ease.</p>
<section id="demo">
<h2>Demo<a class="headerlink" href="#demo" title="Permalink to this headline"></a></h2>
<p>If you simply run</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">demo</span><span class="p">()</span>
</pre></div>
</div>
<p>This method performs the following:</p>
<blockquote>
<div><ul class="simple">
<li><p>it creates a synthetic dataset/graph</p></li>
<li><p>infers identities on it</p></li>
<li><p>saves the predictions to csv</p></li>
<li><p>save the graph with predictions to a GraphML file</p></li>
<li><p>opens the default app to present the graph with inferred identities.</p></li>
</ul>
</div></blockquote>
<p>The output will be something like the following:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>Analyzing 102 component(s). The largest contains 37 nodes.
100%|██████████| 102/102 [00:00&lt;00:00, 6159.48it/s]
Predictions 37
Timing 0:00:00
GraphML diagram at  /Users/swa/synthetic.graphml
Predictions saved to  /Users/swa/predictions.csv
Nodes: 754 Edges: 707 Identities: 50 Inferred: 37
Out[3]:
(&lt;networkx.classes.digraph.DiGraph at 0x7ff6a1c53460&gt;,
                           Device  ... Probability
0   b41c4f85-1921-4327-aae9-f081297c036f  ...        0.38
30  a8d88ba8-e54c-456b-9576-42b32d76f711  ...        0.38
29  74337bb0-cc95-4cf6-82fe-67de8566ad62  ...        0.29
35  7fc8c551-de4a-4d7d-baec-333d52ef6d4e  ...        0.25
33  ed908a2b-544b-403a-9ce6-1406e536d18a  ...        0.25
1   48e9249e-8aeb-405e-be80-6078be5a5874  ...        0.22
31  6e6e3614-1758-49dc-a8ef-75499f22f6d8  ...        0.22
</pre></div>
</div>
<p>If you have, for instance, <a class="reference external" href="https://www.yworks.com/products/yed/download#download">yEd</a> installed the rendered diagram will look something like this:</p>
<img alt="_images/sample.png" src="_images/sample.png" />
</section>
<section id="neo4j">
<h2>Neo4j<a class="headerlink" href="#neo4j" title="Permalink to this headline"></a></h2>
<p>The package can connect directly to Neo4j and add inferred identity like so</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">add_predictions_to_neo</span><span class="p">()</span>
</pre></div>
</div>
<p>If you prefer to fetch the inferred edges rather than adding them to the database you can use:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">neo_to_predictions</span><span class="p">()</span>
</pre></div>
</div>
<p>which will return a data frame and also save things to a CSV file.</p>
<p>These methods have plenty of parameters, see the <a class="reference internal" href="entity_resolution.html#module-entity_resolution.solutions" title="entity_resolution.solutions"><code class="xref py py-class docutils literal notranslate"><span class="pre">documented</span> <span class="pre">methods</span> <span class="pre">for</span> <span class="pre">more</span></code></a></p>
<p>There is also a utility method which creates a synthetic graph in Neo4j:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">create_synthetic_neo</span><span class="p">(</span><span class="s2">&quot;mydb&quot;</span><span class="p">)</span>
</pre></div>
</div>
<p>where <cite>mydb</cite> is the name of a database. If it doesn’t exit it will be created for you. There is also an extra parameter which allows to truncate the database before adding the graph.</p>
</section>
<section id="raw">
<h2>Raw<a class="headerlink" href="#raw" title="Permalink to this headline"></a></h2>
<p>The raw format refers to TSV lines concatened in gzip files in a directory. The package contains, just like the Neo4j connection above, various method to read/write from/to the raw format.</p>
<p>For example,</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">raw_to_predictions</span><span class="p">(</span><span class="s2">&quot;the_dir_with_gzip_files&quot;</span><span class="p">)</span>
</pre></div>
</div>
<p>will directly create predictions from the gzip files and output the result to a CSV file.</p>
<p>To test things out, there is a utility method which will create raw gzip files for you</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">create_synthetic_raw</span><span class="p">(</span><span class="s2">&quot;a_directory&quot;</span><span class="p">)</span>
</pre></div>
</div>
<p>Here again, there are plenty of parameter which allows you to tune the method.</p>
</section>
<section id="json-entities">
<h2>JSON Entities<a class="headerlink" href="#json-entities" title="Permalink to this headline"></a></h2>
<p>The JSON entities format refers to entity blocks containing Device, IP, Location, Identity and Cookie keys. These entities are saved on disk as concatented lines of JSON as txt-files.</p>
<p>For example,</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">create_synthetic_entities_json</span><span class="p">(</span><span class="s2">&quot;the_target_dir&quot;</span><span class="p">)</span>
</pre></div>
</div>
<p>will directly create such entities in the specified directory. This directory can, in return, be used to generate predictions with</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">entities_json_to_predictions</span><span class="p">(</span><span class="s2">&quot;the_target_dir&quot;</span><span class="p">)</span>
</pre></div>
</div>
<p>This will output (much like the raw and Neo4j methods) a CSV file with predictions.</p>
</section>
</section>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="installation.html" class="btn btn-neutral float-left" title="Installation" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
        <a href="modules.html" class="btn btn-neutral float-right" title="entity_resolution" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2022, Orbifold Consulting.</p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>